{"version":3,"sources":["test-trace.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","exports","value","chai_1","require","index_1","describe","it","expect","trace","to","not","be","an","a","QClass","TracedQ","Q","args","concat","before","global","TRACE","after","beforeEach","afterEach","CONSOLE","prototype","add1","group","fqn","eq","debug","debug_n","debug_0","debug_1","undefined","b","result","have","members","groupEnd","add2","y","z"],"mappings":"AAAA;;;;;;;;;;AACA,IAAIA,UAAU,GAAI,UAAQ,SAAKA,UAAd,IAA6B,UAAUC,UAAV,EAAsBC,MAAtB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACnF,MAAIC,CAAC,GAAGC,SAAS,CAACC,MAAlB;AAAA,MAA0BC,CAAC,GAAGH,CAAC,GAAG,CAAJ,GAAQH,MAAR,GAAiBE,IAAI,KAAK,IAAT,GAAgBA,IAAI,GAAGK,MAAM,CAACC,wBAAP,CAAgCR,MAAhC,EAAwCC,GAAxC,CAAvB,GAAsEC,IAArH;AAAA,MAA2HO,CAA3H;AACA,MAAI,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+B,OAAOA,OAAO,CAACC,QAAf,KAA4B,UAA/D,EAA2EL,CAAC,GAAGI,OAAO,CAACC,QAAR,CAAiBZ,UAAjB,EAA6BC,MAA7B,EAAqCC,GAArC,EAA0CC,IAA1C,CAAJ,CAA3E,KACK,KAAK,IAAIU,CAAC,GAAGb,UAAU,CAACM,MAAX,GAAoB,CAAjC,EAAoCO,CAAC,IAAI,CAAzC,EAA4CA,CAAC,EAA7C;AAAiD,QAAIH,CAAC,GAAGV,UAAU,CAACa,CAAD,CAAlB,EAAuBN,CAAC,GAAG,CAACH,CAAC,GAAG,CAAJ,GAAQM,CAAC,CAACH,CAAD,CAAT,GAAeH,CAAC,GAAG,CAAJ,GAAQM,CAAC,CAACT,MAAD,EAASC,GAAT,EAAcK,CAAd,CAAT,GAA4BG,CAAC,CAACT,MAAD,EAASC,GAAT,CAA7C,KAA+DK,CAAnE;AAAxE;AACL,SAAOH,CAAC,GAAG,CAAJ,IAASG,CAAT,IAAcC,MAAM,CAACM,cAAP,CAAsBb,MAAtB,EAA8BC,GAA9B,EAAmCK,CAAnC,CAAd,EAAqDA,CAA5D;AACH,CALD;;AAMA,IAAIQ,UAAU,GAAI,UAAQ,SAAKA,UAAd,IAA6B,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC1D,MAAI,QAAON,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+B,OAAOA,OAAO,CAACO,QAAf,KAA4B,UAA/D,EAA2E,OAAOP,OAAO,CAACO,QAAR,CAAiBF,CAAjB,EAAoBC,CAApB,CAAP;AAC9E,CAFD;;AAGAT,MAAM,CAACM,cAAP,CAAsBK,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,MAAM,GAAGC,OAAO,CAAC,MAAD,CAAtB;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,cAAD,CAAvB;;AACAA,OAAO,CAAC,OAAD,CAAP;;AACAE,QAAQ,CAAC,OAAD,EAAU,YAAM;AACpBC,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAM;AACrBJ,IAAAA,MAAM,CAACK,MAAP,CAAcH,OAAO,CAACI,KAAtB,EAA6BC,EAA7B,CAAgCC,GAAhC,CAAoCC,EAApC,CAAuCC,EAAvC,CAA0C,WAA1C;AACH,GAFC,CAAF;AAGAN,EAAAA,EAAE,CAAC,sBAAD,EAAyB,YAAM;AAC7BJ,IAAAA,MAAM,CAACK,MAAP,CAAcH,OAAO,CAACI,KAAtB,EAA6BC,EAA7B,CAAgCE,EAAhC,CAAmCE,CAAnC,CAAqC,UAArC;AACH,GAFC,CAAF;AAGH,CAPO,CAAR;AAQAR,QAAQ,CAAC,OAAD,EAAU,YAAM;AACpB,MAAIS,MAAJ;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,QAAIC,CAAC;AAAA;AAAA;AACD,mBAAqB;AAAA;;AAAA,0CAANC,IAAM;AAANA,UAAAA,IAAM;AAAA;;AACjB,aAAKA,IAAL,GAAYA,IAAZ;AACH;;AAHA;AAAA;AAAA,+BAIa;AAAA,6CAANA,IAAM;AAANA,YAAAA,IAAM;AAAA;;AACV,iBAAO,KAAKA,IAAL,CAAUC,MAAV,CAAiBD,IAAjB,CAAP;AACH;AANA;AAAA;AAAA,+BAOa;AAAA,6CAANA,IAAM;AAANA,YAAAA,IAAM;AAAA;;AACV,iBAAO,KAAKA,IAAL,CAAUC,MAAV,CAAiBD,IAAjB,CAAP;AACH;AATA;;AAAA;AAAA,OAAL;;AAWAD,IAAAA,CAAC,GAAGpC,UAAU,CAAC,CACXwB,OAAO,CAACI,KADG,EAEXZ,UAAU,CAAC,mBAAD,EAAsB,CAACP,MAAD,CAAtB,CAFC,CAAD,EAGX2B,CAHW,CAAd;AAIA,WAAOA,CAAP;AACH,GAjBD;;AAkBAG,EAAAA,MAAM,CAAC,YAAM;AACTC,IAAAA,MAAM,CAACC,KAAP,GAAe,IAAf;AACH,GAFK,CAAN;AAGAC,EAAAA,KAAK,CAAC,YAAM;AACR,WAAOF,MAAM,CAACC,KAAd;AACH,GAFI,CAAL;AAGAE,EAAAA,UAAU,CAAC,YAAM;AACbT,IAAAA,MAAM,GAAGC,OAAO,EAAhB;AACH,GAFS,CAAV;AAGAS,EAAAA,SAAS,CAAC,YAAM;AACZ,WAAOJ,MAAM,CAACK,OAAd;AACH,GAFQ,CAAT;AAGAnB,EAAAA,EAAE,CAAC,wBAAD,EAA2B,YAAM;AAC/BJ,IAAAA,MAAM,CAACK,MAAP,CAAcO,MAAM,CAACY,SAAP,CAAiBC,IAA/B,EAAqClB,EAArC,CAAwCE,EAAxC,CAA2CE,CAA3C,CAA6C,UAA7C;AACH,GAFC,CAAF;AAGAP,EAAAA,EAAE,CAAC,kCAAD,EAAqC,YAAM;AACzCc,IAAAA,MAAM,CAACK,OAAP,GAAiB;AACbG,MAAAA,KADa,iBACPC,GADO,EACO;AAChB3B,QAAAA,MAAM,CAACK,MAAP,CAAcsB,GAAd,EAAmBpB,EAAnB,CAAsBqB,EAAtB,CAAyB,QAAzB;AACA5B,QAAAA,MAAM,CAACK,MAAP,CAAc,qDAAc,CAA5B;AACAL,QAAAA,MAAM,CAACK,MAAP,mDAAuBE,EAAvB,CAA0BqB,EAA1B,CAA6B,GAA7B;AACA5B,QAAAA,MAAM,CAACK,MAAP,mDAAuBE,EAAvB,CAA0BE,EAA1B,CAA6BE,CAA7B,CAA+B,QAA/B;AACAX,QAAAA,MAAM,CAACK,MAAP,mDAAuBE,EAAvB,CAA0BqB,EAA1B,CAA6B,IAA7B;AACA5B,QAAAA,MAAM,CAACK,MAAP,mDAAuBE,EAAvB,CAA0BqB,EAA1B,CAA6B,GAA7B;AACH,OARY;AASbC,MAAAA,KATa,mBASE;AACX,YAAI,KAAKC,OAAL,KAAiB,KAAKC,OAA1B,EAAmC;AAC/B,eAAKD,OAAL,GAAe,KAAKE,OAApB;AACH;;AACD,YAAI,KAAKF,OAAL,KAAiBG,SAArB,EAAgC;AAC5B,eAAKH,OAAL,GAAe,KAAKC,OAApB;AACH;;AACD,aAAKD,OAAL;AACH,OAjBY;AAkBbC,MAAAA,OAlBa,mBAkBLG,CAlBK,EAkBFnD,CAlBE,EAkBC;AACViB,QAAAA,MAAM,CAACK,MAAP,CAAc6B,CAAd,EAAiB3B,EAAjB,CAAoBqB,EAApB,CAAuB,GAAvB;AACA5B,QAAAA,MAAM,CAACK,MAAP,CAActB,CAAd,EAAiBwB,EAAjB,CAAoBqB,EAApB,CAAuB,GAAvB;AACH,OArBY;AAsBbI,MAAAA,OAtBa,mBAsBLG,MAtBK,EAsBG;AACZnC,QAAAA,MAAM,CAACK,MAAP,CAAc8B,MAAM,CAAClD,MAArB,EAA6BsB,EAA7B,CAAgCqB,EAAhC,CAAmC,CAAnC;AACA5B,QAAAA,MAAM,CAACK,MAAP,CAAc8B,MAAd,EAAsB5B,EAAtB,CAAyB6B,IAAzB,CAA8BC,OAA9B,CAAsC,CAClC,GADkC,EAC7B,GAD6B,EACxB,GADwB,CAAtC;AAGH,OA3BY;AA4BbC,MAAAA,QA5Ba,sBA4BK;AACdtC,QAAAA,MAAM,CAACK,MAAP,CAAc,UAAKpB,MAAnB,EAA2BsB,EAA3B,CAA8BqB,EAA9B,CAAiC,CAAjC;AACH;AA9BY,KAAjB;AAgCA5B,IAAAA,MAAM,CAACK,MAAP,CAAc,IAAIO,MAAJ,CAAW,GAAX,EAAgBa,IAAhB,CAAqB,GAArB,EAA0B,GAA1B,CAAd,EAA8ClB,EAA9C,CAAiD6B,IAAjD,CAAsDC,OAAtD,CAA8D,CAC1D,GAD0D,EACrD,GADqD,EAChD,GADgD,CAA9D;AAGH,GApCC,CAAF;AAqCAjC,EAAAA,EAAE,CAAC,wBAAD,EAA2B,YAAM;AAC/BJ,IAAAA,MAAM,CAACK,MAAP,CAAcO,MAAM,CAACY,SAAP,CAAiBe,IAA/B,EAAqChC,EAArC,CAAwCE,EAAxC,CAA2CE,CAA3C,CAA6C,UAA7C;AACH,GAFC,CAAF;AAGAP,EAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAM;AACxCc,IAAAA,MAAM,CAACK,OAAP,GAAiB;AACbG,MAAAA,KADa,iBACPC,GADO,EACO;AAChB3B,QAAAA,MAAM,CAACK,MAAP,CAAcsB,GAAd,EAAmBpB,EAAnB,CAAsBqB,EAAtB,CAAyB,QAAzB;AACA5B,QAAAA,MAAM,CAACK,MAAP,CAAc,qDAAc,CAA5B;AACAL,QAAAA,MAAM,CAACK,MAAP,mDAAuBE,EAAvB,CAA0BqB,EAA1B,CAA6B,GAA7B;AACA5B,QAAAA,MAAM,CAACK,MAAP,mDAAuBE,EAAvB,CAA0BE,EAA1B,CAA6BE,CAA7B,CAA+B,QAA/B;AACAX,QAAAA,MAAM,CAACK,MAAP,mDAAuBE,EAAvB,CAA0BqB,EAA1B,CAA6B,IAA7B;AACA5B,QAAAA,MAAM,CAACK,MAAP,mDAAuBE,EAAvB,CAA0BqB,EAA1B,CAA6B,GAA7B;AACH,OARY;AASbC,MAAAA,KATa,mBASE;AACX,YAAI,KAAKC,OAAL,KAAiB,KAAKC,OAA1B,EAAmC;AAC/B,eAAKD,OAAL,GAAe,KAAKE,OAApB;AACH;;AACD,YAAI,KAAKF,OAAL,KAAiBG,SAArB,EAAgC;AAC5B,eAAKH,OAAL,GAAe,KAAKC,OAApB;AACH;;AACD,aAAKD,OAAL;AACH,OAjBY;AAkBbC,MAAAA,OAlBa,mBAkBLS,CAlBK,EAkBFC,CAlBE,EAkBC;AACVzC,QAAAA,MAAM,CAACK,MAAP,CAAcmC,CAAd,EAAiBjC,EAAjB,CAAoBqB,EAApB,CAAuB,GAAvB;AACA5B,QAAAA,MAAM,CAACK,MAAP,CAAcoC,CAAd,EAAiBlC,EAAjB,CAAoBqB,EAApB,CAAuB,GAAvB;AACH,OArBY;AAsBbI,MAAAA,OAtBa,mBAsBLG,MAtBK,EAsBG;AACZnC,QAAAA,MAAM,CAACK,MAAP,CAAc8B,MAAM,CAAClD,MAArB,EAA6BsB,EAA7B,CAAgCqB,EAAhC,CAAmC,CAAnC;AACA5B,QAAAA,MAAM,CAACK,MAAP,CAAc8B,MAAd,EAAsB5B,EAAtB,CAAyB6B,IAAzB,CAA8BC,OAA9B,CAAsC,CAClC,GADkC,EAC7B,GAD6B,EACxB,GADwB,CAAtC;AAGH,OA3BY;AA4BbC,MAAAA,QA5Ba,sBA4BK;AACdtC,QAAAA,MAAM,CAACK,MAAP,CAAc,UAAKpB,MAAnB,EAA2BsB,EAA3B,CAA8BqB,EAA9B,CAAiC,CAAjC;AACH;AA9BY,KAAjB;AAgCA5B,IAAAA,MAAM,CAACK,MAAP,CAAc,IAAIO,MAAJ,CAAW,GAAX,EAAgB2B,IAAhB,CAAqB,GAArB,EAA0B,GAA1B,CAAd,EAA8ChC,EAA9C,CAAiD6B,IAAjD,CAAsDC,OAAtD,CAA8D,CAC1D,GAD0D,EACrD,GADqD,EAChD,GADgD,CAA9D;AAGH,GApCC,CAAF;AAqCH,CAhHO,CAAR","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst chai_1 = require(\"chai\");\nconst index_1 = require(\"../lib/index\");\nrequire(\"mocha\");\ndescribe(\"trace\", () => {\n    it(\"should exist\", () => {\n        chai_1.expect(index_1.trace).to.not.be.an(\"undefined\");\n    });\n    it(\"should be a function\", () => {\n        chai_1.expect(index_1.trace).to.be.a(\"function\");\n    });\n});\ndescribe(\"trace\", () => {\n    let QClass;\n    const TracedQ = () => {\n        let Q = class Q {\n            constructor(...args) {\n                this.args = args;\n            }\n            add1(...args) {\n                return this.args.concat(args);\n            }\n            add2(...args) {\n                return this.args.concat(args);\n            }\n        };\n        Q = __decorate([\n            index_1.trace,\n            __metadata(\"design:paramtypes\", [Object])\n        ], Q);\n        return Q;\n    };\n    before(() => {\n        global.TRACE = true;\n    });\n    after(() => {\n        delete global.TRACE;\n    });\n    beforeEach(() => {\n        QClass = TracedQ();\n    });\n    afterEach(() => {\n        delete global.CONSOLE;\n    });\n    it(\"should decorate Q.add1\", () => {\n        chai_1.expect(QClass.prototype.add1).to.be.a(\"function\");\n    });\n    it(\"should log Q('a').add('b', 'c') \", () => {\n        global.CONSOLE = {\n            group(fqn, ...args) {\n                chai_1.expect(fqn).to.eq(\"Q.add1\");\n                chai_1.expect(args.length > 0);\n                chai_1.expect(args[0]).to.eq(\"[\");\n                chai_1.expect(args[1]).to.be.a(\"number\");\n                chai_1.expect(args[2]).to.eq(\"ms\");\n                chai_1.expect(args[3]).to.eq(\"]\");\n            },\n            debug(...args) {\n                if (this.debug_n === this.debug_0) {\n                    this.debug_n = this.debug_1;\n                }\n                if (this.debug_n === undefined) {\n                    this.debug_n = this.debug_0;\n                }\n                this.debug_n(...args);\n            },\n            debug_0(b, c) {\n                chai_1.expect(b).to.eq(\"b\");\n                chai_1.expect(c).to.eq(\"c\");\n            },\n            debug_1(result) {\n                chai_1.expect(result.length).to.eq(3);\n                chai_1.expect(result).to.have.members([\n                    \"a\", \"b\", \"c\",\n                ]);\n            },\n            groupEnd(...args) {\n                chai_1.expect(args.length).to.eq(0);\n            },\n        };\n        chai_1.expect(new QClass(\"a\").add1(\"b\", \"c\")).to.have.members([\n            \"a\", \"b\", \"c\",\n        ]);\n    });\n    it(\"should decorate Q.add2\", () => {\n        chai_1.expect(QClass.prototype.add2).to.be.a(\"function\");\n    });\n    it(\"should log Q('x').add('y', 'z')\", () => {\n        global.CONSOLE = {\n            group(fqn, ...args) {\n                chai_1.expect(fqn).to.eq(\"Q.add2\");\n                chai_1.expect(args.length > 0);\n                chai_1.expect(args[0]).to.eq(\"[\");\n                chai_1.expect(args[1]).to.be.a(\"number\");\n                chai_1.expect(args[2]).to.eq(\"ms\");\n                chai_1.expect(args[3]).to.eq(\"]\");\n            },\n            debug(...args) {\n                if (this.debug_n === this.debug_0) {\n                    this.debug_n = this.debug_1;\n                }\n                if (this.debug_n === undefined) {\n                    this.debug_n = this.debug_0;\n                }\n                this.debug_n(...args);\n            },\n            debug_0(y, z) {\n                chai_1.expect(y).to.eq(\"y\");\n                chai_1.expect(z).to.eq(\"z\");\n            },\n            debug_1(result) {\n                chai_1.expect(result.length).to.eq(3);\n                chai_1.expect(result).to.have.members([\n                    \"x\", \"y\", \"z\",\n                ]);\n            },\n            groupEnd(...args) {\n                chai_1.expect(args.length).to.eq(0);\n            },\n        };\n        chai_1.expect(new QClass(\"x\").add2(\"y\", \"z\")).to.have.members([\n            \"x\", \"y\", \"z\",\n        ]);\n    });\n});\n"],"file":"test-trace.js"}