{"version":3,"sources":["test.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","exports","value","chai_1","require","index_1","index_2","describe","it","expect","trace","to","not","be","an","a","traceable","before","global","TRACE","after","afterEach","CONSOLE","Q","args","concat","Function","Array","prototype","add1","group","fqn","eq","debug","debug_n","debug_0","debug_1","undefined","b","result","have","members","groupEnd","add2","y","z"],"mappings":"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","file":"test.js","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst chai_1 = require(\"chai\");\nconst index_1 = require(\"../lib/index\");\nconst index_2 = require(\"../lib/index\");\nrequire(\"mocha\");\ndescribe(\"trace\", () => {\n    it(\"should exist\", () => {\n        chai_1.expect(index_1.trace).to.not.be.an(\"undefined\");\n    });\n    it(\"should be a function\", () => {\n        chai_1.expect(index_1.trace).to.be.a(\"function\");\n    });\n});\ndescribe(\"traceable\", () => {\n    it(\"should exist\", () => {\n        chai_1.expect(index_2.traceable).to.not.be.an(\"undefined\");\n    });\n    it(\"should be a function\", () => {\n        chai_1.expect(index_2.traceable).to.be.a(\"function\");\n    });\n});\ndescribe(\"traceable\", () => {\n    before(() => {\n        global.TRACE = true;\n    });\n    after(() => {\n        delete global.TRACE;\n    });\n    afterEach(() => {\n        delete global.CONSOLE;\n    });\n    class Q {\n        constructor(...args) {\n            this.args = args;\n        }\n        add1(...args) {\n            return this.args.concat(args);\n        }\n        add2(...args) {\n            return this.args.concat(args);\n        }\n    }\n    __decorate([\n        index_2.traceable,\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [Object]),\n        __metadata(\"design:returntype\", Array)\n    ], Q.prototype, \"add1\", null);\n    __decorate([\n        index_2.traceable(true),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [Object]),\n        __metadata(\"design:returntype\", Array)\n    ], Q.prototype, \"add2\", null);\n    it(\"should decorate Q.add1\", () => {\n        chai_1.expect(Q.prototype.add1).to.be.a(\"function\");\n    });\n    it(\"should log Q('a').add('b', 'c') \", () => {\n        global.CONSOLE = {\n            group(fqn) {\n                chai_1.expect(fqn).to.eq(\"Q.add1\");\n            },\n            debug(...args) {\n                if (this.debug_n === this.debug_0) {\n                    this.debug_n = this.debug_1;\n                }\n                if (this.debug_n === undefined) {\n                    this.debug_n = this.debug_0;\n                }\n                this.debug_n(...args);\n            },\n            debug_0(b, c) {\n                chai_1.expect(b).to.eq(\"b\");\n                chai_1.expect(c).to.eq(\"c\");\n            },\n            debug_1(result) {\n                chai_1.expect(result.length).to.eq(3);\n                chai_1.expect(result).to.have.members([\n                    \"a\", \"b\", \"c\",\n                ]);\n            },\n            groupEnd(...args) {\n                chai_1.expect(args.length).to.eq(0);\n            },\n        };\n        chai_1.expect(new Q(\"a\").add1(\"b\", \"c\")).to.have.members([\n            \"a\", \"b\", \"c\",\n        ]);\n    });\n    it(\"should decorate Q.add2\", () => {\n        chai_1.expect(Q.prototype.add2).to.be.a(\"function\");\n    });\n    it(\"should log Q('x').add('y', 'z')\", () => {\n        global.CONSOLE = {\n            group(fqn) {\n                chai_1.expect(fqn).to.eq(\"Q.add2\");\n            },\n            debug(...args) {\n                if (this.debug_n === this.debug_0) {\n                    this.debug_n = this.debug_1;\n                }\n                if (this.debug_n === undefined) {\n                    this.debug_n = this.debug_0;\n                }\n                this.debug_n(...args);\n            },\n            debug_0(y, z) {\n                chai_1.expect(y).to.eq(\"y\");\n                chai_1.expect(z).to.eq(\"z\");\n            },\n            debug_1(result) {\n                chai_1.expect(result.length).to.eq(3);\n                chai_1.expect(result).to.have.members([\n                    \"x\", \"y\", \"z\",\n                ]);\n            },\n            groupEnd(...args) {\n                chai_1.expect(args.length).to.eq(0);\n            },\n        };\n        chai_1.expect(new Q(\"x\").add2(\"y\", \"z\")).to.have.members([\n            \"x\", \"y\", \"z\",\n        ]);\n    });\n});\n"]}